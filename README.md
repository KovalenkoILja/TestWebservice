# TestWebservice

ОПИСАНИЕ ЗАДАЧИ

1.	Реализовать код для осуществления выборки данных из приведенных таблиц БД MS SQL (Приложение 2)  средствами языка C# на стороне веб сервера приложений BPMonline по следующим критериям:

-	Перечень выводимых столбцов:

ФИО, Телефон, Город, Номер счета, Тип операции, Сумма, Дата операции

-	Должны быть выбраны данные с учетом следующих условий:
 
Операции только за текущий месяц (не позднее 2015-07-01)
Только с заполненным значением номера телефона клиента
Только для клиентов из городов: Москва и СПб

2.	Реализовать на стороне приложения BPMonline C# класс «PersonOperation», наследуемый от класса Person

public class Person 
{
public string Name; 
public string Phone;
public int Score;
}

, с добавлением: 
- необходимых недостающих полей для хранения всей информации из ранее сформированного запроса (пункт 1)
- дополнительного поля «AmountEUR»  
- метода пересчета суммы операции из RUB в валюту EUR (аргументы функции: «код валюты» и «курс») с присвоением результата выполнения функции соответствующему полю «AmounEUR» текущего объекта типа «PersonOperation»

3.	Полученные данные запроса (1) записать в коллекцию объектов типа «PersonOperation» пункта 2

4.	Средствами C# реализовать генерацию XML документа «XMLReport,xml» следующего формата

<?xml version="1.0" encoding="Windows-1251" ?>
<Operation>
<PersonOperation>
	<Name>…</Name>
	<Phone>…</Phone>
	<City>…</City>	
<Date>…</Date>
	<OperationType>…</OperationType>
	<Amount>…</Amount>
	<AmountEUR>…</AmountEUR>
</PersonOperation>
<PersonOperation>
	<Name>…</Name>
	<Phone>…</Phone>
	<City>…</City>
<Date>…</Date>
	<OperationType>…</OperationType>
	<Amount>…</Amount>
	<AmountEUR>…</AmountEUR>
</PersonOperation> 
….
 <Operation>

5.	Средствами C# реализовать отправку данного XML отчета по http протоколу методом POST на адрес веб сервиса: http://webservice.com/xmlreport/

6.	Реализовать дополнительный код/метод на стороне веб сервиса (http://webservice.com/xmlreport/) для обработки полученного XML документа, а именно: выбрать операции с типом «Зачисление» и записать в соответствующий текстовый файл (с названием Operations.csv) csv с форматом строки вида:

ФИО;Телефон;Город;Номер счета;Сумма;Сумма в Евро;Дата;

7.	Реализовать дополнительный код/метод на стороне веб сервиса (http://webservice.com/xmlreport/) для отправки данного csv файла (файл в виде вложения) средствами C# на электронную почту с параметрами:
